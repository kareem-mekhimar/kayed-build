{"version":3,"sources":["../../src/routes/user.route.js"],"names":["router","Router","route","put","updateUser","get","findById","getUserBarters","getUserAuctions","getUserFavoriteBarters","updateFavBarter","delete","deleteFavBarter","getUserFavoriteAuctions","updateFavAuction","deleteFavAuction","use"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDAD,OAAOE,KAAP,CAAa,MAAb,EAAqBC,GAArB,CAAyB,eAAeC,UAAxC,EAAoDC,GAApD,CAAwD,eAAeC,QAAvE;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEAN,OAAOE,KAAP,CAAa,cAAb,EAA6BG,GAA7B,CAAiC,eAAeE,cAAhD;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEAP,OAAOE,KAAP,CAAa,eAAb,EAA8BG,GAA9B,CAAkC,eAAeG,eAAjD;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCAR,OAAOE,KAAP,CAAa,yBAAb,EACSG,GADT,CACa,eAAeI,sBAD5B,EAESN,GAFT,CAEa,eAAeO,eAF5B;AAGA;;;;;;;;;;;;;;;;;;;;;;;;AAwBAV,OAAOE,KAAP,CAAa,mCAAb,EAAkDS,MAAlD,CAAyD,eAAeC,eAAxE;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCAZ,OAAOE,KAAP,CAAa,0BAAb,EACSG,GADT,CACa,eAAeQ,uBAD5B,EAESV,GAFT,CAEa,eAAeW,gBAF5B;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;AAwBAd,OAAOE,KAAP,CAAa,qCAAb,EAAoDS,MAApD,CAA2D,eAAeI,gBAA1E;;AAEAf,OAAOgB,GAAP;AACAhB,OAAOgB,GAAP;;kBAEehB,M","file":"user.route.js","sourcesContent":["import express from \"express\";\nimport UserController from \"../controllers/user.controller\";\nimport userOffersRoute from \"./user-offers.route\" ;\nimport userNotifications from \"./user-notifications.route\" ;\n\nconst router = express.Router();\n\n/**\n* @swagger\n* definitions:\n*   FavBarter:\n*     type: \"object\"\n*     required:\n*     - \"barter\"\n*     properties:\n*       user:\n*         type: string\n*         readOnly: true\n*       barter:\n*         type: string\n*       creationDate:\n*         type: string\n*         format: date-time\n*         readOnly: true\n*/\n\n/**\n* @swagger\n* definitions:\n*   FavAuction:\n*     type: \"object\"\n*     required:\n*     - \"auction\"\n*     properties:\n*       user:\n*         type: string\n*         readOnly: true\n*       auction:\n*         type: string\n*       creationDate:\n*         type: string\n*         format: date-time\n*         readOnly: true\n*/\n\n/**\n * @swagger\n * /users/{id}:\n *   get:\n *     tags:\n *       - User\n *     summary: Get a specific user\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string \n *     responses:\n *       200:\n *         description: Return Updated User\n *         example:                  \n *              {\n *                       \"fullName\": \"Magdy\",\n *                       \"email\": \"demo@demo.com\",\n *                       \"address\": \"82 Fatma El zhraa\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"Egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *              }\n *       404:\n *         description:  User Not Found\n */\n\n\n/**\n * @swagger\n * /users/{id}:\n *   put:\n *     tags:\n *       - User\n *     summary: Update an existing user\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: body\n *         description: User Object\n *         in: body\n *         required: true\n *         schema:\n *           $ref: '#/definitions/User'   \n *     responses:\n *       200:\n *         description: Return Updated User\n *         example:           \n *             {\n *               \"user\": {\n *                       \"fullName\": \"Magdy\",\n *                       \"email\": \"demo@demo.com\",\n *                       \"address\": \"82 Fatma El zhraa\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"Egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *               },\n *               \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1YTFk...\"\n *              }\n *       404:\n *         description:  User Not Found\n *       422:\n *         description: |\n *              - email is Required\n *              - email already exists\n *              ---------------------------\n *              - password is Required\n *              - phone is Required \n *              - fullName is Required \n *              - country is Required \n */\n\nrouter.route('/:id').put(UserController.updateUser).get(UserController.findById);\n\n\n/**\n * @swagger\n * /users/{id}/barters:\n *   get:\n *     tags:\n *       - User\n *     summary: Get all barters of user\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: \"page\"\n *         in: \"query\"\n *         type: number\n *       - name: \"limit\"\n *         in: \"query\"\n *         type: number\n *     responses:\n *       200:\n *         description: Get An Array of User Barters\n *         example: \n *               {\n *               \"links\": {\n *                       \"self\": \"http://localhost:3000/api/v1/users/5a23d9a74bc62c0014489e3b/barters?page=1&limit=1\",\n *                       \"next\": \"http://localhost:3000/api/v1/users/5a23d9a74bc62c0014489e3b/barters?page=2&limit=1\",\n *                       \"last\": \"http://localhost:3000/api/v1/users/5a23d9a74bc62c0014489e3b/barters?page=5&limit=1\"\n *               },\n *               \"data\": [\n *                       {\n *                       \"title\": \"Samsung Note 8\",\n *                       \"description\": \"This is a description for new mobile phone of samsung\",\n *                       \"neededProduct\": \"Iphone x\",\n *                       \"relatedUser\": {\n *                               \"fullName\": \"Magdyxy\",\n *                               \"email\": \"x2x@x2x.com\",\n *                               \"address\": \"82 Fatma\",\n *                               \"phone\": \"01157954393\",\n *                               \"country\": \"Egypt\",\n *                               \"id\": \"5a23d9a74bc62c0014489e3b\"\n *                       },\n *                       \"relatedCategory\": {\n *                               \"name\": \"موبايلات\",\n *                               \"id\": \"5a24430e4311cd0014c1bfba\"\n *                       },\n *                       \"creationDate\": \"2017-12-06T21:02:28.264Z\",\n *                       \"finished\": false,\n *                       \"imgs\": [\n *                               \"http://localhost:3000/uploads/barters/5a285ae4b23b592ca4bf42030.jpeg\"\n *                       ],\n *                       \"type\": \"TEMP\",\n *                       \"id\": \"5a285ae4b23b592ca4bf4203\",\n *                       \"inMyOffers\": true,\n *                       \"inMyFavourites\": false\n *                       }\n *               ],\n *               \"page\": 1,\n *               \"pageCount\": 5,\n *               \"limit\": 1,\n *               \"totalCount\": 5\n *               }\n *       404:\n *         description:  User Not Found\n */\n\nrouter.route('/:id/barters').get(UserController.getUserBarters);\n\n/**\n * @swagger\n * /users/{id}/auctions:\n *   get:\n *     tags:\n *       - User\n *     summary: Get all auctions of user\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: \"page\"\n *         in: \"query\"\n *         type: number\n *       - name: \"limit\"\n *         in: \"query\"\n *         type: number\n *     responses:\n *       200:\n *         description: Get An Array of User Auctions\n *         example: \n *               {\n *               \"links\": {\n *                       \"self\": \"http://localhost:3000/api/v1/users/5a23d9a74bc62c0014489e3b/auctions?page=1&limit=20\"\n *               },\n *               \"data\": [\n *                       {\n *                       \"title\": \"new Car\",\n *                       \"description\": \"Full HD , 3d support\",\n *                       \"startPrice\": 10000,\n *                       \"endDate\": \"2017-12-05T22:00:00.000Z\",\n *                       \"relatedUser\": {\n *                               \"fullName\": \"Magdyxy\",\n *                               \"email\": \"x2x@x2x.com\",\n *                               \"address\": \"82 Fatma\",\n *                               \"phone\": \"01157954393\",\n *                               \"country\": \"Egypt\",\n *                               \"id\": \"5a23d9a74bc62c0014489e3b\"\n *                       },\n *                       \"relatedCategory\": {\n *                               \"name\": \"تلفزيونات\",\n *                               \"id\": \"5a25841337560312b08bb05b\"\n *                       },\n *                       \"highestPrice\": 12000,\n *                       \"creationDate\": \"2017-12-04T17:24:29.201Z\",\n *                       \"finished\": false,\n *                       \"favUsers\": [],\n *                       \"imgs\": [\n *                               \"http://localhost:3000/uploads/auctions/5a2584cd37560312b08bb05c1512408269292.jpeg\"\n *                       ],\n *                       \"id\": \"5a2584cd37560312b08bb05c\",\n *                       \"inMyFavourites\": false\n *                       }\n *               ],\n *               \"page\": 1,\n *               \"pageCount\": 1,\n *               \"limit\": 20,\n *               \"totalCount\": 1\n *               }\n *       404:\n *         description:  User Not Found\n */\n\nrouter.route('/:id/auctions').get(UserController.getUserAuctions);\n\n\n\n/**\n * @swagger\n * /users/{id}/favourites/barters:\n *   get:\n *     tags:\n *       - User\n *     summary: Get all favourite barters of user\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         description: User Id\n *         type: string\n *       - name: \"page\"\n *         in: \"query\"\n *         type: number\n *       - name: \"limit\"\n *         in: \"query\"\n *         type: number\n *     responses:\n *       200:\n *         description: Get An Array of User Favourite Barters\n *         example: \n *               {\n *               \"links\": {\n *                       \"self\": \"http://localhost:3000/api/v1/users/5a2698c11287c23b1868278b/favourites/barters?page=1&limit=20\"\n *               },\n *               \"data\": [\n *                       {\n *                       \"user\": \"5a2698c11287c23b1868278b\",\n *                       \"barter\": {\n *                               \"title\": \"بي\",\n *                               \"description\": \"  بي ي ر\",\n *                               \"neededProduct\": \"ررثقر\",\n *                               \"relatedCategory\": {\n *                               \"name\": \"سيارات\",\n *                               \"id\": \"5a2442fb4311cd0014c1bfb9\"\n *                               },\n *                               \"relatedUser\": {\n *                               \"email\": \"marmar@mar.com\",\n *                               \"fullName\": \"maradona\",\n *                               \"phone\": \"123455\",\n *                               \"country\": \"مصر\",\n *                               \"address\": \"بوسعيد\",\n *                               \"id\": \"5a23dfd04bc62c0014489e3c\"\n *                               },\n *                               \"creationDate\": \"2017-12-04T13:50:56.910Z\",\n *                               \"offerUsers\": [],\n *                               \"favUsers\": [],\n *                               \"finished\": false,\n *                               \"imgs\": [\n *                               \"http://kayed-api.herokuapp.com/uploads/barters/5a2552c020d3b60014b4fc4e0.jpeg\"\n *                               ],\n *                               \"type\": \"TEMP\",\n *                               \"id\": \"5a2552c020d3b60014b4fc4e\"\n *                       },\n *                       \"creationDate\": \"2017-12-05T19:11:33.471Z\",\n *                       \"id\": \"5a26ef65c862504b24f8c229\"\n *                       }\n *               ],\n *               \"page\": 1,\n *               \"pageCount\": 1,\n *               \"limit\": 20,\n *               \"totalCount\": 1\n *               }\n *       404:\n *         description:  User Not Found\n */\n\n\n/**\n * @swagger\n * /users/{id}/favourites/barters:\n *   put:\n *     tags:\n *       - User\n *     summary: Create User Favourite barter\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: body\n *         description: FavBarter Object\n *         in: body\n *         required: true\n *         schema:\n *           $ref: '#/definitions/FavBarter'   \n *     responses:\n *       200:\n *         description: Return Updated Favourite Barter\n *         example:\n *               {\n *               \"user\": \"5a2698c11287c23b1868278b\",\n *               \"barter\": \"5a2552c020d3b60014b4fc4e\",\n *               \"creationDate\": \"2017-12-05T19:11:33.471Z\",\n *               \"id\": \"5a26ef65c862504b24f8c229\"\n *               }\n *       404:\n *         description:  User Not Found\n *       422:\n *         description: barter is required\n */\n\n\nrouter.route('/:id/favourites/barters')\n        .get(UserController.getUserFavoriteBarters)\n        .put(UserController.updateFavBarter);\n/**\n * @swagger\n * /users/{id}/favourites/barters/{barterId}:\n *   delete:\n *     tags:\n *       - User\n *     summary: Delete User Favourite barter\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: barterId\n *         in: path\n *         required: true\n *         type: string\n *     responses:\n *       204:\n *         description: Successed. No Content\n *       404:\n *         description: User FavouriteBarter Not Found\n*/\nrouter.route('/:id/favourites/barters/:barterId').delete(UserController.deleteFavBarter);\n\n\n/**\n* @swagger\n* /users/{id}/favourites/auctions:\n*   get:\n*     tags:\n*       - User\n*     summary: Get all favourite auctions of user\n*     produces:\n*       - application/json\n*     parameters:\n*       - name: id\n*         in: path\n*         required: true\n*         description: User Id\n*         type: string\n*       - name: \"page\"\n*         in: \"query\"\n*         type: number\n*       - name: \"limit\"\n*         in: \"query\"\n*         type: number\n*     responses:\n*       200:\n*         description: Get An Array of User Favourite Auctions\n*         example:\n*                {\n*                \"links\": {\n*                        \"self\": \"http://localhost:3000/api/v1/users/5a2698c11287c23b1868278b/favourites/auctions?page=1&limit=20\"\n*                },\n*                \"data\": [\n*                        {\n*                        \"user\": \"5a2698c11287c23b1868278b\",\n*                        \"auction\": {\n*                                \"title\": \"new Car\",\n*                                \"description\": \"Full HD , 3d support\",\n*                                \"startPrice\": 10000,\n*                                \"endDate\": \"2017-12-05T22:00:00.000Z\",\n*                                \"relatedUser\": {\n*                                \"fullName\": \"Magdyxy\",\n*                                \"email\": \"x2x@x2x.com\",\n*                                \"address\": \"82 Fatma\",\n*                                \"phone\": \"01157954393\",\n*                                \"country\": \"Egypt\",\n*                                \"id\": \"5a23d9a74bc62c0014489e3b\"\n*                                },\n*                                \"relatedCategory\": {\n*                                \"name\": \"تلفزيونات\",\n*                                \"id\": \"5a25841337560312b08bb05b\"\n*                                },\n*                                \"highestPrice\": 12000,\n*                                \"creationDate\": \"2017-12-04T17:24:29.201Z\",\n*                                \"finished\": false,\n*                                \"imgs\": [\n*                                \"http://localhost:3000/uploads/auctions/5a2584cd37560312b08bb05c1512408269292.jpeg\"\n*                                ],\n*                                \"id\": \"5a2584cd37560312b08bb05c\"\n*                        },\n*                        \"creationDate\": \"2017-12-05T19:09:54.712Z\",\n*                        \"id\": \"5a26ef02c862504b24f8c228\"\n*                        }\n*                ],\n*                \"page\": 1,\n*                \"pageCount\": 1,\n*                \"limit\": 20,\n*                \"totalCount\": 1\n*                }\n*       404:\n*         description:  User Not Found\n*/\n\n\n/**\n * @swagger\n * /users/{id}/favourites/auctions:\n *   put:\n *     tags:\n *       - User\n *     summary: Create User Favourite Auction\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: body\n *         description: FavBarter Object\n *         in: body\n *         required: true\n *         schema:\n *           $ref: '#/definitions/FavAuction'   \n *     responses:\n *       200:\n *         description: Return Updated Favourite Auction\n *         example:\n *               {\n *               \"user\": \"5a2698c11287c23b1868278b\",\n *               \"auction\": \"5a2584cd37560312b08bb05c\",\n *               \"creationDate\": \"2017-12-05T19:09:54.712Z\",\n *               \"id\": \"5a26ef02c862504b24f8c228\"\n *               }\n *       404:\n *         description:  User Not Found\n *       422:\n *         description: auction is required\n */\n\n \nrouter.route('/:id/favourites/auctions')\n        .get(UserController.getUserFavoriteAuctions)\n        .put(UserController.updateFavAuction);\n\n/**\n * @swagger\n * /users/{id}/favourites/auctions/{auctionId}:\n *   delete:\n *     tags:\n *       - User\n *     summary: Delete User Favourite Auction\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *       - name: auctionId\n *         in: path\n *         required: true\n *         type: string\n *     responses:\n *       204:\n *         description: Successed. No Content\n *       404:\n *         description: User FavouriteAuction Not Found\n*/\nrouter.route('/:id/favourites/auctions/:auctionId').delete(UserController.deleteFavAuction);\n\nrouter.use(userNotifications) ;\nrouter.use(userOffersRoute)\n\nexport default router;\n"]}