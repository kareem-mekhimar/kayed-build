{"version":3,"sources":["../../src/routes/barter-offer.route.js"],"names":["router","Router","route","get","findAll","post","createBarterOffer","use","findById","put","updateBarterOffer"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEAD,OAAOE,KAAP,CAAa,mBAAb,EACKC,GADL,CACS,sBAAsBC,OAD/B,EAEKC,IAFL,CAEU,sBAAsBC,iBAFhC;;AAKAN,OAAOO,GAAP;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDAP,OAAOE,KAAP,CAAa,4BAAb,EACKC,GADL,CACS,sBAAsBK,QAD/B,EAEKC,GAFL,CAES,sBAAsBC,iBAF/B;;kBAIeV,M","file":"barter-offer.route.js","sourcesContent":["import express from \"express\";\nimport BarterOfferController from \"../controllers/barter-offer.controller\";\nimport offerMessageRoute from \"../routes/offer-message.route\" ;\n\nconst router = express.Router();\n\n/**\n* @swagger\n* definitions:\n*   BarterOffer:\n*     required:\n*     - \"relatedBarter\"\n*     - \"relatedUser\"\n*     - \"description\"\n*     - \"offeredProduct\"\n*     - \"imgs\"\n*     properties:\n*       id:\n*         type: string\n*         readOnly: true\n*       relatedBarter:\n*         type: string\n*         readOnly: true\n*       relatedUser:\n*         type: string\n*       description:\n*         type: string\n*       offeredProduct:\n*         type: string\n*       imgs:\n*         type: array\n*         items:\n*           type: string\n*           format: \"base64\"\n*       status:\n*         type: string\n*         enum:\n*         - \"PENDING\"\n*         - \"ACCEPTED\"\n*         - \"REJECTED\"\n*         - \"DONE\"\n*         readOnly: true\n*         default: \"PENDING\"\n*   Status:\n*     properties:\n*       status:\n*         type: string\n*\n*/\n\n\n/**\n * @swagger\n * /barters/{barterId}/offers:\n *   get:\n *     tags:\n *       - BarterOffer\n *     summary: Get all BarterOffers\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: barterId\n *         in: path\n *         required: true\n *         type: string\n *       - name: \"page\"\n *         in: \"query\"\n *         type: number\n *         default: 1\n *       - name: \"limit\"\n *         in: \"query\"\n *         type: number\n *         default: 20\n *       - name: \"status\"\n *         in: \"query\"\n *         type: string\n *         description: PENDING - ACCEPTED - REJECTED - DONE\n *     responses:\n *       200:\n *         description: Get An Array of BartersOffers\n *         example: \n *               {\n *               \"links\": {\n *                   \"self\": \"http://localhost:3000/api/v1/barters/5a249e4148d6362638faeb9d/offers?page=1&limit=20\"\n *               },\n *               \"data\": [\n *                   {\n *                   \"relatedUser\": {\n *                       \"fullName\": \"Magdyxa\",\n *                       \"email\": \"x2a@x2a.com\",\n *                       \"address\": \"82 Fatma\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"Egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *                   },\n *                   \"description\": \"Samsung Note B\",\n *                   \"offeredProduct\": \"LG TV 2018\",\n *                   \"relatedBarter\": {\n *                       \"title\": \"Samsung A\",\n *                       \"description\": \"assasasaasasas\",\n *                       \"neededProduct\": \"AAAAK\",\n *                       \"relatedUser\": \"5a23d9a74bc62c0014489e3b\",\n *                       \"relatedCategory\": \"5a24430e4311cd0014c1bfba\",\n *                       \"barterOffer\": \"5a2532c7cb4ed22fc0831e61\",\n *                       \"creationDate\": \"2017-12-04T01:00:49.846Z\",\n *                       \"finished\": true,\n *                       \"imgs\": [\n *                       \"http://localhost:3000/uploads/barters/5a249e4148d6362638faeb9d0.jpeg\"\n *                       ],\n *                       \"type\": \"TEMP\",\n *                       \"id\": \"5a249e4148d6362638faeb9d\"\n *                   },\n *                   \"status\": \"PENDING\",\n *                   \"imgs\": [\n *                       \"http://localhost:3000/uploads/barter-offers/5a25341ecb4ed22fc0831e620.jpeg\"\n *                   ],\n *                   \"creationDate\": \"2017-12-04T11:40:14.678Z\",\n *                   \"id\": \"5a25341ecb4ed22fc0831e62\"\n *                   },\n *                   {\n *                   \"relatedUser\": {\n *                       \"fullName\": \"Magdyxa\",\n *                       \"email\": \"x2a@x2a.com\",\n *                       \"address\": \"82 Fatma\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"Egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *                   },\n *                   \"description\": \"Samsung Note A\",\n *                   \"offeredProduct\": \"LG TV 2017\",\n *                   \"relatedBarter\": {\n *                       \"title\": \"Samsung A\",\n *                       \"description\": \"assasasaasasas\",\n *                       \"neededProduct\": \"AAAAK\",\n *                       \"relatedUser\": \"5a23d9a74bc62c0014489e3b\",\n *                       \"relatedCategory\": \"5a24430e4311cd0014c1bfba\",\n *                       \"barterOffer\": \"5a2532c7cb4ed22fc0831e61\",\n *                       \"creationDate\": \"2017-12-04T01:00:49.846Z\",\n *                       \"finished\": true,\n *                       \"imgs\": [\n *                       \"http://localhost:3000/uploads/barters/5a249e4148d6362638faeb9d0.jpeg\"\n *                       ],\n *                       \"type\": \"TEMP\",\n *                       \"id\": \"5a249e4148d6362638faeb9d\"\n *                   },\n *                   \"status\": \"DONE\",\n *                   \"imgs\": [\n *                       \"http://localhost:3000/uploads/barter-offers/5a2532c7cb4ed22fc0831e610.jpeg\"\n *                   ],\n *                   \"creationDate\": \"2017-12-04T11:34:31.576Z\",\n *                   \"id\": \"5a2532c7cb4ed22fc0831e61\"\n *                   }\n *               ],\n *               \"page\": 1,\n *               \"pageCount\": 1,\n *               \"limit\": 20,\n *               \"totalCount\": 2\n *               }\n */\n\n\n/**\n * @swagger\n * /barters/{barterId}/offers:\n *   post:\n *     tags:\n *       - BarterOffer\n *     summary: Create a barter offer\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: barterId\n *         in: path\n *         required: true\n *         type: string\n *       - name: body\n *         description: BarterOffer Object\n *         in: body\n *         required: true\n *         schema:\n *           $ref: '#/definitions/BarterOffer'   \n *     responses:\n *       201:\n *         description: Return Created BarterOffer\n *         example:           \n *               {\n *                   \"relatedBarter\": {\n *                       \"title\": \"Samsung Note 8\",\n *                       \"description\": \"This is a description for new mobile phone of samsung\",\n *                       \"neededProduct\": \"Iphone x\",\n *                       \"relatedUser\": \"5a1db2b8a3c9862828910bef\",\n *                       \"relatedCategory\": \"5a1db3a29246d21c0c4056cf\",\n *                       \"creationDate\": \"2017-11-30T11:49:25.392Z\",\n *                       \"finished\": false,\n *                       \"imgs\": [],\n *                       \"type\": \"TEMP\",\n *                       \"id\": \"5a1ff0456cd27932acaad627\"\n *                   },\n *                   \"relatedUser\": {\n *                       \"fullName\": \"magdy\",\n *                       \"email\": \"demo@demo.com\",\n *                       \"address\": \"82 Fatma El zhraa\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *                   },\n *                   \"description\": \"Samsung Note\",\n *                   \"offeredProduct\": \"TV Samsung\",\n *                   \"status\": \"PENDING\",\n *                   \"imgs\": [\n *                       \"https://wallpaperbrowse.com/media/images/maxresdefault_9As8F3D.jpg\"\n *                   ],\n *                   \"creationDate\": \"2017-11-30T14:27:32.457Z\",\n *                   \"id\": \"5a2015540031364a2043efa8\"\n *               }\n *       422:\n *         description: |\n *              - relatedBarter is Required\n *              - Enter a valid barter id\n *              ----------------------------\n *              - relatedUser is Required\n *              - Enter a valid user id\n *              ----------------------------\n *              - description is Required \n *              - offeredProduct is Required \n *              ----------------------------\n *              - imgs is Required \n *              - Imgs Should be an array of imgs's urls\n *              ----------------------------\n *              - Optional status: you can't overwrite status it's PENDING by default\n */\n\nrouter.route('/:barterId/offers')\n    .get(BarterOfferController.findAll)\n    .post(BarterOfferController.createBarterOffer);\n\n    \nrouter.use(offerMessageRoute) ;\n\n\n/**\n * @swagger\n * /barters/{barterId}/offers/{offerId}:\n *   get:\n *     tags:\n *       - BarterOffer\n *     summary: Get a sepcific barter offer\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: barterId\n *         in: path\n *         required: true\n *         type: string\n *       - name: offerId\n *         in: path\n *         required: true\n *         type: string\n *     responses:\n *       200:\n *         description: Get a barter offer\n *         example: \n *               {\n *                   \"relatedBarter\": {\n *                       \"title\": \"Samsung Note 8\",\n *                       \"description\": \"This is a description for new mobile phone of samsung\",\n *                       \"neededProduct\": \"Iphone x\",\n *                       \"relatedUser\": \"5a1db2b8a3c9862828910bef\",\n *                       \"relatedCategory\": \"5a1db3a29246d21c0c4056cf\",\n *                       \"barterOffer\": \"5a20514241be11491c6a00e0\",\n *                       \"creationDate\": \"2017-11-30T11:49:25.392Z\",\n *                       \"finished\": true,\n *                       \"imgs\": [],\n *                       \"type\": \"TEMP\",\n *                       \"id\": \"5a1ff0456cd27932acaad627\"\n *                   },\n *                   \"relatedUser\": {\n *                       \"fullName\": \"magdy\",\n *                       \"email\": \"demo@demo.com\",\n *                       \"address\": \"ASasasas\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"egypt\",\n *                       \"id\": \"5a1db2b8a3c9862828910bef\"\n *                   },\n *                   \"description\": \"Samsung Note\",\n *                   \"offeredProduct\": \"LG TV 2017\",\n *                   \"status\": \"ACCEPTED\",\n *                   \"imgs\": [\n *                       \"https://wallpaperbrowse.com/media/images/81.jpg\"\n *                   ],\n *                   \"creationDate\": \"2017-12-02T14:54:37.521Z\",\n *                   \"id\": \"5a22beadf76e80383c82cb0a\"\n *               }\n *       404:\n *         description: BarterOffer Not Found\n*/\n\n/**\n * @swagger\n * /barters/{barterId}/offers/{offerId}:\n *   put:\n *     tags:\n *       - BarterOffer\n *     summary: Update an existing barter offer\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: barterId\n *         in: path\n *         required: true\n *         type: string\n *       - name: offerId\n *         in: path\n *         required: true\n *         type: string\n *       - name: body\n *         description: BarterOffer Object\n *         in: body\n *         required: true\n *         schema:\n *             $ref: \"#/definitions/Status\"\n *     responses:\n *       200:\n *         description: Return Updated BarterOffer\n *         example:           \n *                {\n *                   \"relatedBarter\": \"5a1ff0456cd27932acaad627\",\n *                   \"relatedUser\": \"5a1db2b8a3c9862828910bef\",\n *                   \"description\": \"Samsung Note\",\n *                   \"offeredProduct\": \"LG TV 2017\",\n *                   \"status\": \"ACCEPTED\",\n *                   \"imgs\": [\n *                       \"https://wallpaperbrowse.com/media/images/81.jpg\"\n *                   ],\n *                   \"creationDate\": \"2017-12-02T14:54:37.521Z\",\n *                   \"id\": \"5a22beadf76e80383c82cb0a\"\n *               }\n *       400:\n *         description: | \n *              - status should be ACCEPTED or REJECTED IF status of barterOffer is PENDING\n *              - status should be DONE or REJECTED is IF status of barterOffer is ACCEPTED\n *              - you can't update DONE or REJECTED offer IF status of barterOffer is DONE OR REJECTED\n *       404:\n *         description: BarterOffer Not Found\n *       422:\n *         description: |\n *              ----------------------------\n *              - status: valid status is required\n *              - status should be one of ['PENDING','ACCEPTED','REJECTED','DONE']\n */\n\n\n\nrouter.route('/:barterId/offers/:offerId')\n    .get(BarterOfferController.findById)\n    .put(BarterOfferController.updateBarterOffer);\n\nexport default router;\n"]}