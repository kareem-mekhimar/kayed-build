{"version":3,"sources":["../../src/routes/auction.route.js"],"names":["router","Router","route","get","findAll","post","create","findById","delete","use"],"mappings":";;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAGA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDAD,OAAOE,KAAP,CAAa,GAAb,EACKC,GADL,CACS,kBAAkBC,OAD3B,EAEKC,IAFL,CAEU,kBAAkBC,MAF5B;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;;;;;;;;;;;;;;;;;;;;AAqBAN,OAAOE,KAAP,CAAa,MAAb,EACKC,GADL,CACS,kBAAkBI,QAD3B,EAEKC,MAFL,CAEY,kBAAkBA,MAF9B;;AAKAR,OAAOS,GAAP;;kBAEeT,M","file":"auction.route.js","sourcesContent":["\nimport express from \"express\";\nimport auctionOfferRoute from \"./auction-offer.route\";\nimport AuctionController from \"../controllers/auction.controller\";\n\n\nconst router = express.Router();\n\n\n/**\n* @swagger\n* definitions:\n*   Auction:\n*     type: \"object\"\n*     required:\n*     - \"title\"\n*     - \"description\"\n*     - \"startPrice\"\n*     - \"endDate\"\n*     - \"relatedUser\"\n*     - \"relatedCategory\"\n*     properties:\n*       id:\n*         type: string\n*         readOnly: true\n*       title:\n*         type: string \n*       description:\n*         type: string\n*       startPrice:\n*         type: string\n*       endDate:\n*         type: string\n*       relatedUser:\n*         type: string\n*       relatedCategory:\n*         type: string\n*       imgs:\n*         type: array\n*         items:\n*           type: string\n*           format: \"base64\"\n*       finished:\n*         type: boolean\n*         default: false\n*         readOnly: true\n*       auctionOffer:\n*         type: string\n*         readOnly: true\n*       highestPrice:\n*         type: number\n*         readOnly: true\n*       offersCount:\n*         type: number\n*         readOnly: true\n*       topBids:\n*         type: object \n*         readOnly: true   \n*       creationDate:\n*         type: string\n*         format: date-time\n*         readOnly: true\n*/\n\n/**\n * @swagger\n * /auctions:\n *   get:\n *     tags:\n *       - Auctions\n *     summary: Get a page of auctions\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: \"page\"\n *         in: \"query\"\n *         type: number\n *         default: 1\n *       - name: \"limit\"\n *         in: \"query\"\n *         type: number\n *         default: 20\n *       - name: \"categories\"\n *         in: \"query\"\n *         type: string\n *         description: \"EX : id1,id2,id3,..\"\n *       - name: \"finished\"\n *         in: \"query\"\n *         type: boolean\n *         description: true - false\n *       - name: \"startPrice\"\n *         in: \"query\"\n *         type: number\n *       - name: \"endPrice\"\n *         in: \"query\"\n *         type: number\n *     responses:\n *       200:\n *         description: Get An Array of Auctions\n *         example: \n *               {\n *                   \"links\": {\n *                       \"self\": \"http://localhost:3000/api/v1/auctions?page=6&limit=2\",\n *                       \"first\": \"http://localhost:3000/api/v1/auctions?page=1&limit=2\",\n *                       \"prev\": \"http://localhost:3000/api/v1/auctions?page=5&limit=2\",\n *                       \"next\": \"http://localhost:3000/api/v1/auctions?page=7&limit=2\",\n *                       \"last\": \"http://localhost:3000/api/v1/auctions?page=7&limit=2\"\n *                   },\n *                   \"data\": [\n *                       {\n *                           \"title\": \"oppo\",\n *                           \"description\": \"good device\",\n *                           \"startPrice\": 100000,\n *                           \"relatedCategory\": {\n *                               \"name\": \"مجديات\",\n *                               \"id\": \"5a2443970b92ff001421a3b9\"\n *                           },\n *                           \"relatedUser\": {\n *                               \"email\": \"hazem.tarek@gmail.com\",\n *                               \"fullName\": \"Hazem Tarek\",\n *                               \"phone\": \"01014466503\",\n *                               \"country\": \"مصر\",\n *                               \"address\": \"بورسعيد\",\n *                               \"img\": \"http://kayed-api.herokuapp.com/uploads/5a24117b4bc62c0014489e43.png\",\n *                               \"id\": \"5a24117b4bc62c0014489e43\"\n *                           },\n *                           \"endDate\": \"2017-12-31T00:00:00.000Z\",\n *                           \"highestPrice\": 1300025,\n *                           \"creationDate\": \"2017-12-03T19:27:58.447Z\",\n *                           \"finished\": false,\n *                           \"imgs\": [\n *                               \"http://kayed-api.herokuapp.com/uploads/auctions/5a24503e7585730014f103c61512329278453.jpeg\"\n *                           ],\n *                           \"id\": \"5a24503e7585730014f103c6\",\n *                           \"inMyOffers\": true,\n *                           \"inMyFavourites\": false\n *                       },\n *                       {\n *                           \"title\": \"opel astra\",\n *                           \"description\": \"good car\",\n *                           \"startPrice\": 1000,\n *                           \"relatedCategory\": {\n *                               \"name\": \"سيارات\",\n *                               \"id\": \"5a2442fb4311cd0014c1bfb9\"\n *                           },\n *                           \"relatedUser\": {\n *                               \"email\": \"hazem.tarek@gmail.com\",\n *                               \"fullName\": \"Hazem Tarek\",\n *                               \"phone\": \"01014466503\",\n *                               \"country\": \"مصر\",\n *                               \"address\": \"بورسعيد\",\n *                               \"img\": \"http://kayed-api.herokuapp.com/uploads/5a24117b4bc62c0014489e43.png\",\n *                               \"id\": \"5a24117b4bc62c0014489e43\"\n *                           },\n *                           \"endDate\": \"2017-12-24T00:00:00.000Z\",\n *                           \"highestPrice\": 10000000000002,\n *                           \"creationDate\": \"2017-12-04T16:14:53.719Z\",\n *                           \"finished\": false,\n *                           \"imgs\": [\n *                               \"http://kayed-api.herokuapp.com/uploads/auctions/5a25747dcda9950014db1bc11512404093721.jpeg\",\n *                               \"http://kayed-api.herokuapp.com/uploads/auctions/5a25747dcda9950014db1bc11512404093722.jpeg\",\n *                               \"http://kayed-api.herokuapp.com/uploads/auctions/5a25747dcda9950014db1bc11512404093722.jpeg\"\n *                           ],\n *                           \"id\": \"5a25747dcda9950014db1bc1\",\n *                           \"inMyOffers\": true,\n *                           \"inMyFavourites\": false\n *                       }\n *                   ],\n *                   \"page\": 6,\n *                   \"pageCount\": 7,\n *                   \"limit\": \"2\",\n *                   \"totalCount\": 14\n *               }\n */\n\n/**\n * @swagger\n * /auctions:\n *   post:\n *     tags:\n *       - Auctions\n *     summary: Add a new Auction\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: body\n *         description: Auction Object\n *         in: body\n *         required: true\n *         schema:\n *           $ref: '#/definitions/Auction'   \n *     responses:\n *       201:\n *         description: Return Created Auction\n *         example:           \n *               {\n *               \"title\": \"new Car\",\n *               \"description\": \"Full HD , 3d support\",\n *               \"startPrice\": 10000,\n *               \"endDate\": \"2017-12-05T22:00:00.000Z\",\n *               \"relatedUser\": \"5a23d9a74bc62c0014489e3b\",\n *               \"relatedCategory\": \"5a25841337560312b08bb05b\",\n *               \"highestPrice\": 10000,\n *               \"creationDate\": \"2017-12-04T17:24:29.201Z\",\n *               \"finished\": false,\n *               \"imgs\": [\n *                   \"http://localhost:3000/uploads/auctions/5a2584cd37560312b08bb05c1512408269292.jpeg\"\n *               ],\n *               \"id\": \"5a2584cd37560312b08bb05c\"\n *               }\n *       422:\n *         description: |\n *              - relatedUser is Required\n *              - Related user Is Not Found\n *              ----------------------------\n *              - relatedCategory is Required \n *              - Related category Is Not Found\n *              ----------------------------\n *              - title is Required \n *              - description is Required \n *              - endDate is Required \n *              ----------------------------\n *              - startPrice is Required \n *              - Invalid Number\n *              ----------------------------\n *              - Provide at least one image\n*/\n\nrouter.route('/')\n    .get(AuctionController.findAll)\n    .post(AuctionController.create)\n\n/**\n * @swagger\n * /auctions/{id}:\n *   get:\n *     tags:\n *       - Auctions\n *     summary: Get an auction by id\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *     responses:\n *       200:\n *         description: Get an Auction\n *         example: \n *               {\n *                   \"title\": \"NEW MAZDA\",\n *                   \"description\": \"NEW CAR\",\n *                   \"startPrice\": 120000,\n *                   \"endDate\": \"2017-12-10T00:00:00.000Z\",\n *                   \"relatedUser\": {\n *                       \"fullName\": \"Magdy\",\n *                       \"email\": \"demo2@demo2.com\",\n *                       \"address\": \"82 Fatma\",\n *                       \"phone\": \"01157954393\",\n *                       \"country\": \"Egypt\",\n *                       \"id\": \"5a2698c11287c23b1868278b\"\n *                   },\n *                   \"relatedCategory\": {\n *                       \"name\": \"سيارات\",\n *                       \"id\": \"5a2442fb4311cd0014c1bfb9\"\n *                   },\n *                   \"highestPrice\": 121000,\n *                   \"auctionOffer\": \"5a29b7a6ab7c7e009055bccd\",\n *                   \"creationDate\": \"2017-12-07T21:47:10.265Z\",\n *                   \"finished\": true,\n *                   \"imgs\": [\n *                       \"http://localhost:3000/uploads/auctions/5a29b6deab7c7e009055bccc1512683230999.jpeg\"\n *                   ],\n *                   \"id\": \"5a29b6deab7c7e009055bccc\",\n *                   \"inMyOffers\": false,\n *                   \"inMyFavourites\": true,\n *                   \"offersCount\": 1,\n *                   \"topBids\": {\n *                       \"1\": {\n *                           \"bidderName\": \"Magdy\",\n *                           \"price\": 121000\n *                       }\n *                   }\n *               }\n *       404:\n *         description: Auction with this id not found\n*/\n\n/**\n * @swagger\n * /auctions/{id}:\n *   delete:\n *     tags:\n *       - Auctions\n *     summary: Delete an Auction\n *     produces:\n *       - application/json\n *     parameters:\n *       - name: id\n *         in: path\n *         required: true\n *         type: string\n *     responses:\n *       204:\n *         description: Successed. No Content\n *       404:\n *         description: Auction with this id not found\n*/\n\nrouter.route('/:id')\n    .get(AuctionController.findById)\n    .delete(AuctionController.delete);\n\n\nrouter.use(auctionOfferRoute);\n\nexport default router;\n"]}