{"version":3,"sources":["../../src/controllers/offer-message.controller.js"],"names":["findAll","req","res","next","barterId","params","offerId","findById","barter","ApiError","NotFound","offer","find","relatedBarterOffer","populate","messages","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;kBAIe;AAELA,WAFK,mBAEGC,GAFH,EAEQC,GAFR,EAEaC,IAFb,EAEmB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBC,oCAFsB,GAEXH,IAAII,MAAJ,CAAWD,QAFA;AAGtBE,mCAHsB,GAGZL,IAAII,MAAJ,CAAWC,OAHC;AAAA;AAAA,mCAKP,iBAAOC,QAAP,CAAgBH,QAAhB,CALO;;AAAA;AAKtBI,kCALsB;;AAAA,gCAMrBA,MANqB;AAAA;AAAA;AAAA;;AAAA,6DAOfL,KAAK,IAAIM,SAASC,QAAb,CAAsB,QAAtB,CAAL,CAPe;;AAAA;AAAA;AAAA,mCAUR,sBAAYH,QAAZ,CAAqBD,OAArB,CAVQ;;AAAA;AAUtBK,iCAVsB;;AAAA,gCAWrBA,KAXqB;AAAA;AAAA;AAAA;;AAAA,6DAYfR,KAAK,IAAIM,SAASC,QAAb,CAAsB,aAAtB,CAAL,CAZe;;AAAA;AAAA;AAAA,mCAeL,uBAAaE,IAAb,CAAkB,EAAEC,oBAAoBP,OAAtB,EAAlB,EAAmDQ,QAAnD,CAA4D,aAA5D,CAfK;;AAAA;AAetBC,oCAfsB;;AAgB1Bb,gCAAIc,IAAJ,CAASD,QAAT;;AAhB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkB7B;AApBU,C","file":"offer-message.controller.js","sourcesContent":["import OfferMessage from \"../models/offer-message.model\";\nimport BarterOffer from \"../models/barter-offer.model\";\nimport Barter from \"../models/barter.model\";\n\n\n\nexport default {\n\n    async findAll(req, res, next) {\n\n        let barterId = req.params.barterId;\n        let offerId = req.params.offerId;\n\n        let barter = await Barter.findById(barterId);\n        if (!barter) {\n            return next(new ApiError.NotFound('Barter'));\n        }\n\n        let offer = await BarterOffer.findById(offerId);\n        if (!offer) {\n            return next(new ApiError.NotFound('BarterOffer'));\n        }\n\n        let messages = await OfferMessage.find({ relatedBarterOffer: offerId }).populate(\"relatedUser\") ;\n        res.send(messages);\n\n    },\n\n\n\n\n}"]}